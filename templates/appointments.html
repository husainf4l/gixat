{% extends 'dashboard_layout.html' %}
{% load static %}

{% block title %}Appointments - Gixat Auto Repair{% endblock %}

{% block page_subtitle %}
<h1 class="text-xl lg:text-2xl font-semibold text-gray-800">Appointments</h1>
<p class="text-sm text-gray-600 mt-1">Manage your appointments and schedule</p>
{% endblock %}

{% block top_actions %}
<div class="flex items-center space-x-3">
    <button onclick="showNewAppointmentModal()" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
        New Appointment
    </button>
    <button onclick="window.print()" class="inline-flex items-center px-4 py-2 bg-gray-600 text-white text-sm font-medium rounded-lg hover:bg-gray-700 transition-colors duration-200">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
        </svg>
        Print Schedule
    </button>
</div>
{% endblock %}

{% block dashboard_content %}
<!-- View Switcher -->
<div class="mb-6 bg-white rounded-lg shadow-sm p-4">
    <div class="flex flex-wrap items-center justify-between gap-4">
        <!-- View Mode Tabs -->
        <div class="flex items-center space-x-2">
            <button onclick="switchView('calendar')" id="btn-calendar" class="px-4 py-2 text-sm font-medium rounded-lg bg-blue-100 text-blue-800 transition-colors duration-200">
                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                Calendar View
            </button>
            <button onclick="switchView('list')" id="btn-list" class="px-4 py-2 text-sm font-medium rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors duration-200">
                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                </svg>
                List View
            </button>
        </div>

        <!-- Calendar Mode Switcher (only visible in calendar view) -->
        <div id="calendar-mode-switcher" class="flex items-center space-x-2">
            <button onclick="switchCalendarMode('day')" id="mode-day" class="px-3 py-1.5 text-xs font-medium rounded-md bg-blue-600 text-white">Day</button>
            <button onclick="switchCalendarMode('week')" id="mode-week" class="px-3 py-1.5 text-xs font-medium rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">Week</button>
            <button onclick="switchCalendarMode('month')" id="mode-month" class="px-3 py-1.5 text-xs font-medium rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300">Month</button>
        </div>

        <!-- Filter Options -->
        <div class="flex items-center space-x-2">
            <select id="mechanic-filter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="">All Mechanics</option>
                <option value="mechanic1">John Mechanic</option>
                <option value="mechanic2">Sarah Tech</option>
                <option value="mechanic3">Mike Engineer</option>
            </select>
            <select id="bay-filter" class="px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="">All Bays</option>
                <option value="bay1">Bay 1</option>
                <option value="bay2">Bay 2</option>
                <option value="bay3">Bay 3</option>
                <option value="bay4">Bay 4</option>
            </select>
        </div>
    </div>
</div>

<!-- Status Filter -->
<div class="mb-6 bg-white rounded-lg shadow-sm p-4">
    <div class="flex flex-wrap items-center gap-2">
        <span class="text-sm font-medium text-gray-700 mr-2">Status:</span>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800">All</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">Booked</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-green-100 text-green-800">Checked-In</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800">In Progress</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-emerald-100 text-emerald-800">Completed</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-red-100 text-red-800">Cancelled</button>

        <span class="mx-3 text-gray-300">|</span>

        <span class="text-sm font-medium text-gray-700 mr-2">Type:</span>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-purple-100 text-purple-800">Scheduled</button>
        <button class="px-3 py-1.5 text-xs font-medium rounded-full bg-orange-100 text-orange-800">Walk-In</button>
    </div>
</div>

<!-- Calendar View -->
<div id="calendar-view" class="bg-white rounded-lg shadow-sm mb-6">
    <!-- Day View -->
    <div id="day-view" class="calendar-mode">
        <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button onclick="navigateDate(-1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h3 id="day-view-title" class="text-lg font-semibold text-gray-800 transition-transform duration-200">Monday, October 5, 2025</h3>
                <button onclick="navigateDate(1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
            <button onclick="goToToday()" class="px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200">Today</button>
        </div>

        <!-- Time slots grid -->
        <div class="p-6 transition-opacity duration-300" id="day-view-content">
            <div class="grid grid-cols-5 gap-4">
                <!-- Time column -->
                <div class="space-y-4">
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">8:00 AM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">9:00 AM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">10:00 AM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">11:00 AM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">12:00 PM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">1:00 PM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">2:00 PM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">3:00 PM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">4:00 PM</div>
                    <div class="h-12 flex items-center justify-end pr-4 text-xs text-gray-500 font-medium">5:00 PM</div>
                </div>

                <!-- Bay 1 -->
                <div class="space-y-4">
                    <div class="text-center font-semibold text-sm text-gray-700 mb-2 pb-2 border-b-2 border-blue-500">Bay 1</div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div draggable="true" class="h-24 border-l-4 border-blue-600 bg-blue-50 rounded-lg p-2 cursor-move hover:shadow-lg transition-shadow">
                        <div class="text-xs font-semibold text-blue-900">10:00 AM - 12:00 PM</div>
                        <div class="text-xs text-blue-800 font-medium mt-1">Oil Change</div>
                        <div class="text-xs text-blue-700 mt-1">Toyota Camry - ABC123</div>
                        <span class="inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">Booked</span>
                    </div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                </div>

                <!-- Bay 2 -->
                <div class="space-y-4">
                    <div class="text-center font-semibold text-sm text-gray-700 mb-2 pb-2 border-b-2 border-green-500">Bay 2</div>
                    <div draggable="true" class="h-12 border-l-4 border-green-600 bg-green-50 rounded-lg p-2 cursor-move hover:shadow-lg transition-shadow">
                        <div class="text-xs font-semibold text-green-900">8:00 AM - 9:00 AM</div>
                        <div class="text-xs text-green-800 font-medium mt-1">Brake Service</div>
                        <span class="inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800">Checked-In</span>
                    </div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div draggable="true" class="h-24 border-l-4 border-orange-600 bg-orange-50 rounded-lg p-2 cursor-move hover:shadow-lg transition-shadow">
                        <div class="text-xs font-semibold text-orange-900">1:00 PM - 3:00 PM</div>
                        <div class="text-xs text-orange-800 font-medium mt-1">Transmission Repair</div>
                        <div class="text-xs text-orange-700 mt-1">Honda Accord - XYZ789</div>
                        <span class="inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full bg-orange-100 text-orange-800">Walk-In</span>
                    </div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                </div>

                <!-- Bay 3 -->
                <div class="space-y-4">
                    <div class="text-center font-semibold text-sm text-gray-700 mb-2 pb-2 border-b-2 border-purple-500">Bay 3</div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div draggable="true" class="h-36 border-l-4 border-indigo-600 bg-indigo-50 rounded-lg p-2 cursor-move hover:shadow-lg transition-shadow">
                        <div class="text-xs font-semibold text-indigo-900">9:00 AM - 12:00 PM</div>
                        <div class="text-xs text-indigo-800 font-medium mt-1">Engine Diagnostic</div>
                        <div class="text-xs text-indigo-700 mt-1">Ford F-150 - DEF456</div>
                        <div class="text-xs text-indigo-700 mt-1">Mechanic: John</div>
                        <span class="inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800">In Progress</span>
                    </div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                </div>

                <!-- Bay 4 -->
                <div class="space-y-4">
                    <div class="text-center font-semibold text-sm text-gray-700 mb-2 pb-2 border-b-2 border-red-500">Bay 4</div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div draggable="true" class="h-12 border-l-4 border-purple-600 bg-purple-50 rounded-lg p-2 cursor-move hover:shadow-lg transition-shadow">
                        <div class="text-xs font-semibold text-purple-900">2:00 PM - 3:00 PM</div>
                        <div class="text-xs text-purple-800 font-medium mt-1">Tire Rotation</div>
                        <span class="inline-block mt-1 px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800">Booked</span>
                    </div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                    <div class="h-12 border border-gray-200 rounded-lg bg-gray-50"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Week View -->
    <div id="week-view" class="calendar-mode hidden">
        <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button onclick="navigateDate(-1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h3 id="week-view-title" class="text-lg font-semibold text-gray-800 transition-transform duration-200">Week of Oct 5 - Oct 11, 2025</h3>
                <button onclick="navigateDate(1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
            <button onclick="goToToday()" class="px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200">This Week</button>
        </div>

        <div class="p-6 overflow-x-auto transition-opacity duration-300" id="week-view-content">
            <div class="grid grid-cols-8 gap-2 min-w-max">
                <!-- Header row -->
                <div class="text-xs font-semibold text-gray-500"></div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">MON</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">5</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">TUE</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">6</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">WED</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">7</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">THU</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">8</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">FRI</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">9</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">SAT</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">10</div>
                </div>
                <div class="text-center p-2">
                    <div class="text-xs font-semibold text-gray-500">SUN</div>
                    <div class="text-lg font-bold text-gray-900 week-day-number">11</div>
                </div>

                <!-- 8 AM -->
                <div class="text-xs text-gray-500 text-right pr-2 py-1">8 AM</div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50 min-h-[60px]"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-green-50 border-l-4 border-green-600">
                    <div class="text-xs font-semibold text-green-900">Oil Change</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>

                <!-- 10 AM -->
                <div class="text-xs text-gray-500 text-right pr-2 py-1">10 AM</div>
                <div class="border border-gray-200 rounded p-1 bg-blue-50 border-l-4 border-blue-600">
                    <div class="text-xs font-semibold text-blue-900">Brake Job</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-yellow-50 border-l-4 border-yellow-600">
                    <div class="text-xs font-semibold text-yellow-900">Inspection</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>

                <!-- 12 PM -->
                <div class="text-xs text-gray-500 text-right pr-2 py-1">12 PM</div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-purple-50 border-l-4 border-purple-600">
                    <div class="text-xs font-semibold text-purple-900">AC Repair</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-indigo-50 border-l-4 border-indigo-600">
                    <div class="text-xs font-semibold text-indigo-900">Diagnostic</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>

                <!-- 2 PM -->
                <div class="text-xs text-gray-500 text-right pr-2 py-1">2 PM</div>
                <div class="border border-gray-200 rounded p-1 bg-orange-50 border-l-4 border-orange-600">
                    <div class="text-xs font-semibold text-orange-900">Tire Change</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-pink-50 border-l-4 border-pink-600">
                    <div class="text-xs font-semibold text-pink-900">Alignment</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-teal-50 border-l-4 border-teal-600">
                    <div class="text-xs font-semibold text-teal-900">Battery Test</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>

                <!-- 4 PM -->
                <div class="text-xs text-gray-500 text-right pr-2 py-1">4 PM</div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-red-50 border-l-4 border-red-600">
                    <div class="text-xs font-semibold text-red-900">Engine Work</div>
                </div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
                <div class="border border-gray-200 rounded p-1 bg-gray-50"></div>
            </div>
        </div>
    </div>

    <!-- Month View -->
    <div id="month-view" class="calendar-mode hidden">
        <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button onclick="navigateDate(-1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                <h3 id="month-view-title" class="text-lg font-semibold text-gray-800 transition-transform duration-200">October 2025</h3>
                <button onclick="navigateDate(1)" class="p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
            <button onclick="goToToday()" class="px-3 py-1.5 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200">This Month</button>
        </div>

        <div class="p-6 transition-opacity duration-300" id="month-view-content">
            <div class="grid grid-cols-7 gap-2">
                <!-- Day headers -->
                <div class="text-center text-xs font-semibold text-gray-500 py-2">SUN</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">MON</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">TUE</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">WED</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">THU</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">FRI</div>
                <div class="text-center text-xs font-semibold text-gray-500 py-2">SAT</div>

                <!-- Week 1 -->
                <div class="border border-gray-200 rounded-lg p-2 bg-gray-50 h-24"></div>
                <div class="border border-gray-200 rounded-lg p-2 bg-gray-50 h-24"></div>
                <div class="border border-gray-200 rounded-lg p-2 bg-gray-50 h-24"></div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">1</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-blue-100 text-blue-800 px-1 rounded">3 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">2</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-green-100 text-green-800 px-1 rounded">5 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">3</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-yellow-100 text-yellow-800 px-1 rounded">2 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">4</div>
                </div>

                <!-- Week 2 -->
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900 bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center">5</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-blue-100 text-blue-800 px-1 rounded">4 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">6</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-purple-100 text-purple-800 px-1 rounded">6 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">7</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-indigo-100 text-indigo-800 px-1 rounded">3 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">8</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-green-100 text-green-800 px-1 rounded">7 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">9</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-yellow-100 text-yellow-800 px-1 rounded">4 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">10</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-orange-100 text-orange-800 px-1 rounded">2 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">11</div>
                </div>

                <!-- Additional weeks... -->
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">12</div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">13</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-blue-100 text-blue-800 px-1 rounded">5 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">14</div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">15</div>
                    <div class="mt-1 space-y-1">
                        <div class="text-xs bg-red-100 text-red-800 px-1 rounded">8 appts</div>
                    </div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">16</div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">17</div>
                </div>
                <div class="border border-gray-200 rounded-lg p-2 bg-white h-24">
                    <div class="text-sm font-semibold text-gray-900">18</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- List View -->
<div id="list-view" class="hidden">
    <div class="bg-white rounded-lg shadow-sm">
        <div class="px-6 py-4 border-b border-gray-200">
            <h2 class="text-xl font-semibold text-gray-800">Appointments List</h2>
        </div>
        <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date & Time</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehicle</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mechanic</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bay</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Reminder</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">Oct 5, 2025</div>
                            <div class="text-sm text-gray-500">10:00 AM - 12:00 PM</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">John Doe</div>
                            <div class="text-sm text-gray-500">john@example.com</div>
                            <div class="text-sm text-gray-500">555-1234</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Toyota Camry</div>
                            <div class="text-sm text-gray-500">ABC-123</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Oil Change & Filter</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-2">
                                    <span class="text-xs font-medium text-blue-600">JM</span>
                                </div>
                                <span class="text-sm text-gray-900">John Mechanic</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Bay 1</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full">Scheduled</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Booked</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-1">
                                <button class="p-1 hover:bg-gray-100 rounded" title="SMS Sent">
                                    <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-100 rounded" title="Email Sent">
                                    <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                                    </svg>
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-2">Edit</button>
                            <button class="text-green-600 hover:text-green-900 mr-2">Check-In</button>
                            <button class="text-red-600 hover:text-red-900">Cancel</button>
                        </td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">Oct 5, 2025</div>
                            <div class="text-sm text-gray-500">1:00 PM - 3:00 PM</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">Jane Smith</div>
                            <div class="text-sm text-gray-500">jane@example.com</div>
                            <div class="text-sm text-gray-500">555-5678</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Honda Accord</div>
                            <div class="text-sm text-gray-500">XYZ-789</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Transmission Repair</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-2">
                                    <span class="text-xs font-medium text-green-600">ST</span>
                                </div>
                                <span class="text-sm text-gray-900">Sarah Tech</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Bay 2</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full">Walk-In</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Checked-In</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-1">
                                <button class="p-1 hover:bg-gray-100 rounded" title="Send SMS">
                                    <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-100 rounded" title="Send Email">
                                    <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                                    </svg>
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-2">Edit</button>
                            <button class="text-green-600 hover:text-green-900 mr-2">Start</button>
                            <button class="text-red-600 hover:text-red-900">Cancel</button>
                        </td>
                    </tr>

                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">Oct 5, 2025</div>
                            <div class="text-sm text-gray-500">9:00 AM - 12:00 PM</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">Bob Wilson</div>
                            <div class="text-sm text-gray-500">bob@example.com</div>
                            <div class="text-sm text-gray-500">555-9012</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">Ford F-150</div>
                            <div class="text-sm text-gray-500">DEF-456</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Engine Diagnostic</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-2">
                                    <span class="text-xs font-medium text-purple-600">ME</span>
                                </div>
                                <span class="text-sm text-gray-900">Mike Engineer</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full">Bay 3</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full">Scheduled</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 py-1 text-xs font-medium bg-indigo-100 text-indigo-800 rounded-full">In Progress</span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-1">
                                <button class="p-1 hover:bg-gray-100 rounded" title="SMS Sent">
                                    <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                    </svg>
                                </button>
                                <button class="p-1 hover:bg-gray-100 rounded" title="Email Sent">
                                    <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                                    </svg>
                                </button>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-blue-600 hover:text-blue-900 mr-2">View</button>
                            <button class="text-green-600 hover:text-green-900 mr-2">Complete</button>
                            <button class="text-red-600 hover:text-red-900">Cancel</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Summary Stats -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-6">
    <div class="bg-white rounded-lg shadow-sm p-6">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                </div>
            </div>
            <div class="ml-5">
                <p class="text-sm font-medium text-gray-500">Today's Appointments</p>
                <p class="text-2xl font-bold text-gray-900">12</p>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
            </div>
            <div class="ml-5">
                <p class="text-sm font-medium text-gray-500">Checked-In</p>
                <p class="text-2xl font-bold text-gray-900">5</p>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </div>
            </div>
            <div class="ml-5">
                <p class="text-sm font-medium text-gray-500">Walk-Ins</p>
                <p class="text-2xl font-bold text-gray-900">3</p>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6">
        <div class="flex items-center">
            <div class="flex-shrink-0">
                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
            </div>
            <div class="ml-5">
                <p class="text-sm font-medium text-gray-500">Pending</p>
                <p class="text-2xl font-bold text-gray-900">4</p>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    .no-print {
        display: none !important;
    }

    #calendar-view {
        page-break-after: always;
    }

    .draggable {
        cursor: default !important;
    }
}

/* Drag and drop styling */
[draggable="true"] {
    cursor: move;
}

[draggable="true"]:active {
    opacity: 0.5;
}
</style>

<script>
// Calendar state management
let currentDate = new Date(2025, 9, 5); // October 5, 2025
let currentMode = 'day';

// View switching
function switchView(view) {
    const calendarView = document.getElementById('calendar-view');
    const listView = document.getElementById('list-view');
    const btnCalendar = document.getElementById('btn-calendar');
    const btnList = document.getElementById('btn-list');
    const calendarModeSwitcher = document.getElementById('calendar-mode-switcher');

    if (view === 'calendar') {
        calendarView.classList.remove('hidden');
        listView.classList.add('hidden');
        calendarModeSwitcher.classList.remove('hidden');
        btnCalendar.classList.add('bg-blue-100', 'text-blue-800');
        btnCalendar.classList.remove('bg-gray-100', 'text-gray-700');
        btnList.classList.add('bg-gray-100', 'text-gray-700');
        btnList.classList.remove('bg-blue-100', 'text-blue-800');
    } else {
        calendarView.classList.add('hidden');
        listView.classList.remove('hidden');
        calendarModeSwitcher.classList.add('hidden');
        btnList.classList.add('bg-blue-100', 'text-blue-800');
        btnList.classList.remove('bg-gray-100', 'text-gray-700');
        btnCalendar.classList.add('bg-gray-100', 'text-gray-700');
        btnCalendar.classList.remove('bg-blue-100', 'text-blue-800');
    }
}

// Calendar mode switching
function switchCalendarMode(mode) {
    currentMode = mode;
    const dayView = document.getElementById('day-view');
    const weekView = document.getElementById('week-view');
    const monthView = document.getElementById('month-view');
    const btnDay = document.getElementById('mode-day');
    const btnWeek = document.getElementById('mode-week');
    const btnMonth = document.getElementById('mode-month');

    // Hide all views
    dayView.classList.add('hidden');
    weekView.classList.add('hidden');
    monthView.classList.add('hidden');

    // Reset all buttons
    [btnDay, btnWeek, btnMonth].forEach(btn => {
        btn.classList.remove('bg-blue-600', 'text-white');
        btn.classList.add('bg-gray-200', 'text-gray-700');
    });

    // Show selected view and highlight button
    if (mode === 'day') {
        dayView.classList.remove('hidden');
        btnDay.classList.add('bg-blue-600', 'text-white');
        btnDay.classList.remove('bg-gray-200', 'text-gray-700');
        updateDayView();
    } else if (mode === 'week') {
        weekView.classList.remove('hidden');
        btnWeek.classList.add('bg-blue-600', 'text-white');
        btnWeek.classList.remove('bg-gray-200', 'text-gray-700');
        updateWeekView();
    } else if (mode === 'month') {
        monthView.classList.remove('hidden');
        btnMonth.classList.add('bg-blue-600', 'text-white');
        btnMonth.classList.remove('bg-gray-200', 'text-gray-700');
        updateMonthView();
    }
}

// Date navigation
function navigateDate(direction) {
    if (currentMode === 'day') {
        currentDate.setDate(currentDate.getDate() + direction);
        updateDayView();
    } else if (currentMode === 'week') {
        currentDate.setDate(currentDate.getDate() + (direction * 7));
        updateWeekView();
    } else if (currentMode === 'month') {
        currentDate.setMonth(currentDate.getMonth() + direction);
        updateMonthView();
    }
}

function goToToday() {
    currentDate = new Date(2025, 9, 5); // Reset to October 5, 2025
    if (currentMode === 'day') {
        updateDayView();
    } else if (currentMode === 'week') {
        updateWeekView();
    } else if (currentMode === 'month') {
        updateMonthView();
    }
}

// Update day view header with animation
function updateDayView() {
    const header = document.getElementById('day-view-title');
    const content = document.getElementById('day-view-content');
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    // Fade out
    content.style.opacity = '0';

    setTimeout(() => {
        header.textContent = `${days[currentDate.getDay()]}, ${months[currentDate.getMonth()]} ${currentDate.getDate()}, ${currentDate.getFullYear()}`;

        // Fade in
        content.style.opacity = '1';

        // Visual feedback - flash the header
        header.style.transform = 'scale(1.05)';
        setTimeout(() => {
            header.style.transform = 'scale(1)';
        }, 200);
    }, 150);
}

// Update week view header with animation
function updateWeekView() {
    const header = document.getElementById('week-view-title');
    const content = document.getElementById('week-view-content');
    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

    // Get start of week (Sunday)
    const startOfWeek = new Date(currentDate);
    startOfWeek.setDate(currentDate.getDate() - currentDate.getDay());

    // Get end of week (Saturday)
    const endOfWeek = new Date(startOfWeek);
    endOfWeek.setDate(startOfWeek.getDate() + 6);

    // Fade out
    content.style.opacity = '0';

    setTimeout(() => {
        header.textContent = `Week of ${months[startOfWeek.getMonth()]} ${startOfWeek.getDate()} - ${months[endOfWeek.getMonth()]} ${endOfWeek.getDate()}, ${currentDate.getFullYear()}`;

        // Update week header dates
        const weekDays = content.querySelectorAll('.week-day-number');
        for (let i = 0; i < 7; i++) {
            const dayDate = new Date(startOfWeek);
            dayDate.setDate(startOfWeek.getDate() + i);
            if (weekDays[i]) {
                weekDays[i].textContent = dayDate.getDate();
            }
        }

        // Fade in
        content.style.opacity = '1';

        // Visual feedback
        header.style.transform = 'scale(1.05)';
        setTimeout(() => {
            header.style.transform = 'scale(1)';
        }, 200);
    }, 150);
}

// Update month view header with animation
function updateMonthView() {
    const header = document.getElementById('month-view-title');
    const content = document.getElementById('month-view-content');
    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    // Fade out
    content.style.opacity = '0';

    setTimeout(() => {
        header.textContent = `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;

        // Fade in
        content.style.opacity = '1';

        // Visual feedback
        header.style.transform = 'scale(1.05)';
        setTimeout(() => {
            header.style.transform = 'scale(1)';
        }, 200);
    }, 150);
}

// Drag and drop functionality
let draggedElement = null;

document.addEventListener('DOMContentLoaded', function() {
    const draggables = document.querySelectorAll('[draggable="true"]');

    draggables.forEach(draggable => {
        draggable.addEventListener('dragstart', function(e) {
            draggedElement = this;
            this.style.opacity = '0.5';
        });

        draggable.addEventListener('dragend', function(e) {
            this.style.opacity = '1';
        });
    });

    // Make all time slot cells droppable
    const dropZones = document.querySelectorAll('.border-gray-200');

    dropZones.forEach(zone => {
        zone.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.classList.add('bg-blue-100');
        });

        zone.addEventListener('dragleave', function(e) {
            this.classList.remove('bg-blue-100');
        });

        zone.addEventListener('drop', function(e) {
            e.preventDefault();
            this.classList.remove('bg-blue-100');

            if (draggedElement) {
                // Move the appointment to the new slot
                this.appendChild(draggedElement);
                console.log('Appointment rescheduled');
                // Here you would make an AJAX call to update the backend
            }
        });
    });
});

// New appointment modal
function showNewAppointmentModal() {
    // Create modal overlay
    const modal = document.createElement('div');
    modal.id = 'appointment-modal';
    modal.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4';
    modal.onclick = function(e) {
        if (e.target === modal) closeAppointmentModal();
    };

    modal.innerHTML = `
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
            <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-50 to-indigo-50">
                <h3 class="text-xl font-semibold text-gray-800">New Appointment</h3>
                <button onclick="closeAppointmentModal()" class="p-2 hover:bg-gray-100 rounded-lg transition-colors">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <form class="p-6 space-y-6">
                <!-- Client Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Client *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select a client...</option>
                        <option value="1">John Doe - john@example.com</option>
                        <option value="2">Jane Smith - jane@example.com</option>
                        <option value="3">Bob Wilson - bob@example.com</option>
                    </select>
                </div>

                <!-- Vehicle Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Vehicle *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select a vehicle...</option>
                        <option value="1">Toyota Camry - ABC-123</option>
                        <option value="2">Honda Accord - XYZ-789</option>
                        <option value="3">Ford F-150 - DEF-456</option>
                    </select>
                </div>

                <!-- Service Type -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Service Type *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select service...</option>
                        <option value="oil">Oil Change & Filter</option>
                        <option value="brake">Brake Service</option>
                        <option value="transmission">Transmission Repair</option>
                        <option value="engine">Engine Diagnostic</option>
                        <option value="tire">Tire Rotation</option>
                        <option value="inspection">Vehicle Inspection</option>
                    </select>
                </div>

                <!-- Date and Time -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date *</label>
                        <input type="date" value="2025-10-05" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Time *</label>
                        <input type="time" value="10:00" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <!-- Duration -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Estimated Duration *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="30">30 minutes</option>
                        <option value="60" selected>1 hour</option>
                        <option value="90">1.5 hours</option>
                        <option value="120">2 hours</option>
                        <option value="180">3 hours</option>
                        <option value="240">4 hours</option>
                    </select>
                </div>

                <!-- Mechanic Assignment -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Assign Mechanic *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select mechanic...</option>
                        <option value="mechanic1">John Mechanic</option>
                        <option value="mechanic2">Sarah Tech</option>
                        <option value="mechanic3">Mike Engineer</option>
                    </select>
                </div>

                <!-- Bay Assignment -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Assign Bay *</label>
                    <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">Select bay...</option>
                        <option value="bay1">Bay 1</option>
                        <option value="bay2">Bay 2</option>
                        <option value="bay3">Bay 3</option>
                        <option value="bay4">Bay 4</option>
                    </select>
                </div>

                <!-- Appointment Type -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Appointment Type *</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="type" value="scheduled" checked class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Scheduled</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="type" value="walkin" class="w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Walk-In</span>
                        </label>
                    </div>
                </div>

                <!-- Reminders -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Send Reminders</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" checked class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Send SMS reminder (24 hours before)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" checked class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Send Email reminder (24 hours before)</span>
                        </label>
                    </div>
                </div>

                <!-- Notes -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
                    <textarea rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Any special instructions or notes..."></textarea>
                </div>

                <!-- Buttons -->
                <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
                    <button type="button" onclick="closeAppointmentModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                        Cancel
                    </button>
                    <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors">
                        Create Appointment
                    </button>
                </div>
            </form>
        </div>
    `;

    document.body.appendChild(modal);
}

function closeAppointmentModal() {
    const modal = document.getElementById('appointment-modal');
    if (modal) {
        modal.style.opacity = '0';
        setTimeout(() => modal.remove(), 200);
    }
}

// Print schedule functionality
function printSchedule() {
    window.print();
}

// Mechanic filter functionality
let currentMechanicFilter = '';
let currentBayFilter = '';

document.addEventListener('DOMContentLoaded', function() {
    // Mechanic filter
    const mechanicFilter = document.getElementById('mechanic-filter');
    if (mechanicFilter) {
        mechanicFilter.addEventListener('change', function() {
            currentMechanicFilter = this.value;
            filterAppointments();
        });
    }

    // Bay filter
    const bayFilter = document.getElementById('bay-filter');
    if (bayFilter) {
        bayFilter.addEventListener('change', function() {
            currentBayFilter = this.value;
            filterAppointments();
        });
    }
});

function filterAppointments() {
    // This would filter the calendar view based on selected mechanic/bay
    // For now, we'll just show a notification
    let filterText = 'Showing ';

    if (currentMechanicFilter && currentBayFilter) {
        filterText += `${currentMechanicFilter} in ${currentBayFilter}`;
    } else if (currentMechanicFilter) {
        filterText += `appointments for ${currentMechanicFilter}`;
    } else if (currentBayFilter) {
        filterText += `appointments in ${currentBayFilter}`;
    } else {
        filterText = 'Showing all appointments';
    }

    console.log(filterText);

    // Visual feedback - you could add a toast notification here
    const header = document.querySelector('#day-view-title, #week-view-title, #month-view-title');
    if (header && !header.classList.contains('hidden')) {
        const originalText = header.textContent;
        header.style.color = '#2563eb';
        setTimeout(() => {
            header.style.color = '';
        }, 500);
    }
}
</script>
{% endblock %}
